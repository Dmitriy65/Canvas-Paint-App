(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{20:function(e,t,n){e.exports=n(34)},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(7),o=n.n(i),l=n(4),c=n(2),u=n(11),s=n(5),h=n.n(s),f=n(6),p=n(19),d=n(15),v=n(16),w=function(){function e(t,n){var r=this;Object(d.a)(this,e),this.convertToString=function(){r.stringView="-".repeat(r.width+2),r.stringView+="\n";for(var e=0;e<r.height;e++){r.stringView+="|";for(var t=0;t<r.width;t++)r.stringView+=r.array[e][t];r.stringView+="|",r.stringView+="\n"}r.stringView+="-".repeat(r.width+2),r.canvasParts.push(r.stringView+"\n")},this.drawLine=function(e,t,n,a){if(e>r.width||t>r.height||n>r.width||a>r.height)throw new Error("Draw line out of paint zone!");if(t===a)for(var i=r.array[t-1],o=n>e?n:e,l=n>e?e:n;l<=o;l++)i[l-1]="x";else if(e===n)for(var c=a>t?a:t,u=a>t?t:a;u<=c;u++){r.array[u-1][e-1]="x"}},this.drawRectangle=function(e,t,n,a){r.drawLine(e,t,n,t),r.drawLine(n,t,n,a),r.drawLine(n,a,e,a),r.drawLine(e,a,e,t)},this.fillArea=function(e,t,n){if(e>r.width||t>r.height)throw new Error("Bucket fill out of paint zone!");var a=r.array,i={x:e,y:t},o=[];for(o.push(i);o.length;){var l=o.pop(),c=l.x,u=l.y;if(!(c>r.width||u>r.height||u<=0||c<=0)){var s=a[u-1];" "===s[c-1]&&(s[c-1]=n,o.push({x:c+1,y:u}),o.push({x:c-1,y:u}),o.push({x:c,y:u+1}),o.push({x:c,y:u-1}))}}},this.width=t,this.height=n,this.array=this.createCanvasArray(t,n),this.canvasParts=[]}return Object(v.a)(e,[{key:"createCanvasArray",value:function(e,t){for(var n=[],r=0;r<t;r++){n[r]=[];for(var a=0;a<e;a++)n[r][a]=" "}return n}}]),e}();w.handleCanvasCreation=function(e){try{Object.keys(e).forEach((function(t){if(e[t].length>1)for(var n=e[t].length,r=0;n!==r;)x(t,e[t][r],y),r++;else x(t,e[t][0],y)}));var t=y.canvasParts.join("");return[C.createOutputFile(t),y.stringView,null]}catch(n){return[null,null,new Error("Incorrect input commands.Please, try another commands!").message]}};var y,g="C",m="L",E="R",b="B",x=function(e,t){var n=t.x1,r=t.y1,a=t.x2,i=t.y2,o=t.width,l=t.height,c=t.color;switch(e){case g:y=new w(o,l);break;case m:y.drawLine(n,r,a,i);break;case E:y.drawLine(n,r,a,r),y.drawLine(a,r,a,i),y.drawLine(a,i,n,i),y.drawLine(n,i,n,r);break;case b:y.fillArea(n,r,c);break;default:console.log("Can`t find any canvas actions...")}y.convertToString()},L=w,k=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=function(){n("Error with reading txt file!")},r.readAsText(e)}))},O=function(e){var t=e.split("\n").filter((function(e){return e.length>1}));if("C"!==t[0][0])return{error:"Command to create canvas doesn`t exist!"};var n={};return t.forEach((function(e){var t,r,a,i,o,l,c,u=e[0],s=e.slice(2).split(" ").map((function(e){return Number.isNaN(Number(e))?e:Number(e)}));if(2===s.length){var h=Object(f.a)(s,2);t=h[0],r=h[1]}else if(3===s.length){var p=Object(f.a)(s,3);a=p[0],i=p[1],c=p[2]}else if(4===s.length){var d=Object(f.a)(s,4);a=d[0],i=d[1],o=d[2],l=d[3]}n[u]?(2===s.length&&n[u].push({width:t,height:r}),4===s.length&&n[u].push({x1:a,y1:i,x2:o,y2:l}),3===s.length&&n[u].push({x1:a,y1:i,color:c})):(n[u]=[],2===s.length&&n[u].push({width:t,height:r}),4===s.length&&n[u].push({x1:a,y1:i,x2:o,y2:l}),3===s.length&&n[u].push({x1:a,y1:i,color:c}))})),n},C={createOutputFile:function(e){var t=new Blob([e],{type:"text/plain"});return URL.createObjectURL(t)},processInputFile:function(e){var t,n;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,"text/plain"!==e.type){r.next=13;break}return r.next=4,h.a.awrap(k(e));case 4:if(t=r.sent){r.next=7;break}throw new Error("File doesn`t contains any data!");case 7:if(!(n=O(t)).error){r.next=10;break}throw new Error(n.error);case 10:return r.abrupt("return",Object(p.a)(L.handleCanvasCreation(n)));case 13:throw new Error('Cant read input file, type doesn`t match "text/plain"!');case 14:r.next=19;break;case 16:return r.prev=16,r.t0=r.catch(0),r.abrupt("return",[null,null,r.t0.message]);case 19:case"end":return r.stop()}}),null,null,[[0,16]])}},j=function(e){return{type:"HANDLE_FILE_SUCCESS",payload:e}},F=function(e){return{type:"HANDLE_FILE_ERROR",payload:e}},N={canvas:"",outputLink:"",errorMessage:""};var I=Object(c.c)({file:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HANDLE_FILE_SUCCESS":return Object(u.a)({},e,{outputLink:t.payload[0],canvas:t.payload[1],errorMessage:""});case"HANDLE_FILE_ERROR":return Object(u.a)({},e,{outputLink:null,canvas:null,errorMessage:t.payload});default:return e}}}),R=n(17),A=n.n(R),S=n(18),V=Object(c.d)(I,Object(c.a)(S.a,A.a));n(30);var _=function(e){var t=e.canvas,n=e.errorMessage;return console.log(n),a.a.createElement("div",{className:"canvas-field"},!n&&t?a.a.createElement("pre",{style:{fontSize:"1.5rem"}},t):a.a.createElement("p",{style:{color:"red"}},n))},M=Object(l.b)((function(e){var t=e.file;return{canvas:t.canvas,errorMessage:t.errorMessage}}),null)(_);n(31);var D=function(e){var t=e.handleInputFile,n=e.link;return a.a.createElement("div",{className:"btn-block"},a.a.createElement("label",{className:"custom-file-upload",htmlFor:"input-file"},"Click to upload your txt file",a.a.createElement("input",{type:"file",id:"input-file",onChange:function(e){var n=e.target.files[0];n&&t(n)}})),a.a.createElement("br",null),n?a.a.createElement("a",{href:n,className:"active-link",download:"output.txt"},"Click to download your txt file"):a.a.createElement("a",{href:"#",className:"disabled-link"},"You can`t download you file. Correct file required!"))},H=Object(l.b)((function(e){return{link:e.file.outputLink}}),(function(e){return{handleInputFile:function(t){return e(function(e){return function(t){var n,r,a,i,o;return h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,h.a.awrap(C.processInputFile(e));case 2:n=l.sent,r=Object(f.a)(n,3),a=r[0],i=r[1],o=r[2],t(o?F(o):j([a,i]));case 8:case"end":return l.stop()}}))}}(t))}}}))(D);n(32);var P=function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"Hello. In this app your can convert your input.txt file ",a.a.createElement("br",null)," into canvas and then download it. Try it!"))};var B=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(P,null),a.a.createElement(M,null),a.a.createElement(H,null))};n(33);o.a.render(a.a.createElement(l.a,{store:V},a.a.createElement("main",null,a.a.createElement(B,null))),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.775f6068.chunk.js.map